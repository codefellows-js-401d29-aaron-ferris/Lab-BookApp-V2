<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models/books/books-schema.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models/books/books-schema.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'
/**
 * this defines the shape of the books object for mongo. adds the bookshelf appropriate from the bookshelves object to the book capablities of every class created for the model used for each of the models
 */
const mongoose = require('mongoose');
// require('mongoose-schema-jsonschema')(mongoose);
const bookshelf = require('../bookshelfs/bookshelf-schema.js');

/**
 * defines base book object
 */
const books = mongoose.Schema({
  title: { type:String, required:true },
  author: { type:String, required:true },
  isbn: { type:String, required:true },
  image_url: {type:String, required:true},
  description: {type:String, required:true},
  id: {type:String, required:true},
}, {toObject:{virtuals:true}, toJson:{virtuals:true}});

/**
 * adds bookshelf to it
 */
books.virtual('bookshelves', {
  ref:'bookshelves',
  localField:'bookshelf',
  foreignField:'_id',
  justOne: false,
});

books.pre('find', function(){
  try {
    this.populate('books');
  }
  catch(e) {console.log('did not work', e); }
});

module.exports = mongoose.model('books', books);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="-_%25250AExports%252520all%252520of%252520the%252520methods%252520used%252520in%252520the%252520modulemodule_.html">/
Exports all of the methods used in the module</a></li></ul><h3>Classes</h3><ul><li><a href="global.html#Model">Model</a></li></ul><h3>Global</h3><ul><li><a href="global.html#books">books</a></li><li><a href="global.html#cwd">cwd</a></li><li><a href="global.html#handleError">handleError</a></li><li><a href="global.html#mongoose">mongoose</a></li><li><a href="global.html#start">start</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Mar 31 2019 22:40:18 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
